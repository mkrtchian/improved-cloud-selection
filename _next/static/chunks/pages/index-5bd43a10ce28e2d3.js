(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{516:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return F},default:function(){return G}});var o=t(7294),r=t(9008),i=t.n(r),a=t(2276),c=t.n(a),s=t(5893);var l=function(e){var n=e.setSelectedProvider,t=e.selectedProvider;return(0,s.jsx)("ul",{className:c().list,children:[{name:"Amazon Web Services",src:"/images/aws_logo.svg"},{name:"Google Cloud Platform",src:"/images/gcp_logo.svg",size:"large"},{name:"Microsoft Azure",src:"/images/azure_logo.svg",size:"large"},{name:"DigitalOcean",src:"/images/digital_ocean_logo.svg"},{name:"UpCloud",src:"/images/upcloud_logo.svg"}].map((function(e){var o=t===e.name;return(0,s.jsx)("li",{"aria-current":o?"location":void 0,className:c().item,children:(0,s.jsx)("button",{className:"".concat(c().button," ").concat(o?c().selected:""),onClick:function(){return t=e.name,void n(t);var t},children:(0,s.jsx)("img",{src:"".concat("/improved-cloud-selection").concat(e.src),alt:e.name,className:"".concat(c().image," ").concat("large"===e.size?c().imageLarge:"")})})},e.name)}))})},u=t(214),d=t.n(u),f=t(1373),m=t.n(f),_=t(9669),v=t.n(_),g=t(8100),p={clouds:"".concat("https://damp-fortress-19341.herokuapp.com","/clouds"),locationByIP:"".concat("https://damp-fortress-19341.herokuapp.com","/geo-coordinates")};function h(e){return v().get(e).then((function(e){return e.data}))}var x=function(e){var n=(0,g.ZP)(p.clouds,h,{fallbackData:e}),t=n.data,o=n.error;return{clouds:t?t.clouds:[],isCloudsLoading:!o&&!t,isCloudsError:Boolean(o)}};var j=function(e){(0,o.useEffect)((function(){v().get(p.locationByIP).then((function(n){var t;n&&(function(e){return null!==e&&"object"===typeof e&&"data"in e}(t=n)&&"number"===typeof t.data.longitude&&"number"===typeof t.data.latitude)&&e(n.data)})).catch((function(){}))}),[])},b=t(7698);function N(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}var y=function(e,n){var t=x(e).clouds;return(0,o.useMemo)((function(){var e={};return function(){var n,o=N(t);try{for(o.s();!(n=o.n()).done;){var r=n.value;r.cloud_provider in e||(e[r.cloud_provider]={}),r.cloud_region in e[r.cloud_provider]||(e[r.cloud_provider][r.cloud_region]=[]),e[r.cloud_provider][r.cloud_region].push(r)}}catch(i){o.e(i)}finally{o.f()}}(),function(){if(n)for(var t in e)for(var o in e[t])e[t][o]=(0,b.orderByDistance)(n,e[t][o])}(),e}),[t,n])};var L=function(e){return function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(n){e({longitude:n.coords.longitude,latitude:n.coords.latitude})}))}},S=t(2640);var D=function(e){var n=e.defaultRegion,t=e.organizedRegions,r=e.setSelectedRegion,i=e.userLocation;(0,o.useEffect)((function(){if(Boolean(n)){var e=function(e){var n=e,o=t[n][0];if(i)for(var r=(0,b.getDistance)(i,o),a=0,c=Object.entries(t);a<c.length;a++){var s=(0,S.Z)(c[a],2),l=s[0],u=s[1];(0,b.getDistance)(i,u[0])<r&&(n=l,o=u[0],r=(0,b.getDistance)(i,o))}return n}(n);r(e)}}),[t])};var P=function(e){var n=e.organizedRegions,t=e.selectedRegion,r=e.setSelectedRegion,i=e.userLocation,a=(0,o.useMemo)((function(){return Object.keys(n).slice().sort()}),[n]);return D({defaultRegion:a&&a[0],organizedRegions:n,setSelectedRegion:r,userLocation:i}),(0,s.jsx)("ul",{className:m().list,children:a.map((function(e){var n=t===e;return(0,s.jsx)("li",{"aria-current":n?"location":void 0,className:"".concat(m().items," ").concat(n?m().selected:""),children:(0,s.jsx)("button",{className:"".concat(m().button," ").concat(n?m().selected:""),onClick:function(){r(e)},children:e})},e)}))})},w=t(212),R=t.n(w);var k=function(e){var n=e.cloud;return(0,s.jsxs)("li",{className:R().cloud,children:[(0,s.jsx)("div",{className:R().cloudName,"data-testid":"cloud-name",children:n.cloud_name}),(0,s.jsx)("div",{className:R().cloudDescription,children:n.cloud_description})]},n.cloud_name)},z=t(5527),I=t.n(z);var B=function(e){var n=e.cloudList,t=(0,o.useMemo)((function(){return n.slice().sort()}),[n]);return(0,s.jsx)("ul",{className:I().cloudlist,children:t.map((function(e){return(0,s.jsx)(k,{cloud:e},e.cloud_name)}))})},E=2e4,M=t(6950),O=t.n(M);var A=function(e){var n=e.setMinimalDistance,t=(0,o.useState)(E),r=t[0],i=t[1];return(0,s.jsxs)("div",{className:O().sliderContainer,children:[(0,s.jsx)("label",{htmlFor:"distance-limit",className:O().sliderLabel,children:"Select maximal distance between you and the cloud instances:"}),(0,s.jsx)("input",{type:"range",className:O().sliderInput,min:"1",max:20100,value:r,step:"100",id:"distance-limit",onChange:function(e){var t=Number(e.target.value);i(t),n(t)}}),(0,s.jsxs)("span",{className:O().sliderDistance,children:[r," km"]})]})};var T=function(e){var n=e.cloudList,t=e.userLocation,r=(0,o.useState)(E),i=r[0],a=r[1],c=(0,o.useMemo)((function(){return t?n.filter((function(e){return(0,b.getDistance)(t,e)<1e3*i})):n}),[i,t,n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A,{setMinimalDistance:a}),(0,s.jsx)(B,{cloudList:c})]})},H=t(368),X=t.n(H);var q=function(e){var n=e.setUserLocation,t=L(n);return(0,s.jsxs)("button",{className:X().button,onClick:t,children:[(0,s.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 513.597 513.597",className:X().locateIcon,children:[(0,s.jsx)("g",{children:(0,s.jsx)("path",{d:"M263.278,0.107C158.977-3.408,73.323,80.095,73.323,183.602c0,117.469,112.73,202.72,175.915,325.322 c3.208,6.225,12.169,6.233,15.388,0.009c57.16-110.317,154.854-184.291,172.959-290.569 C456.331,108.387,374.776,3.866,263.278,0.107z M256.923,279.773c-53.113,0-96.171-43.059-96.171-96.171 s43.059-96.171,96.171-96.171c53.113,0,96.172,43.059,96.172,96.171S310.036,279.773,256.923,279.773z"})}),"aria-hidden=",!0]}),"More precise results"]})};var F=!0,G=function(e){var n=e.cloudsObject,t=(0,o.useState)("Google Cloud Platform"),r=t[0],a=t[1],c=(0,o.useState)("Europe"),u=c[0],f=c[1],m=(0,o.useState)(),_=m[0],v=m[1];j(v);var g=y(n,_),p=r in g,h=p&&u in g[r];return(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Improved cloud selection"})}),(0,s.jsxs)("main",{role:"main",className:d().main,children:[(0,s.jsx)("h1",{className:d().title,children:"Enhanced cloud selection"}),(0,s.jsx)(q,{setUserLocation:v}),(0,s.jsx)(l,{setSelectedProvider:a,selectedProvider:r}),p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P,{organizedRegions:g[r],setSelectedRegion:f,selectedRegion:u,userLocation:_}),h&&(0,s.jsx)(T,{cloudList:g[r][u],userLocation:_})]})]})]})}},8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(516)}])},368:function(e){e.exports={button:"NavigatorLocationButton_button__cADvH",locateIcon:"NavigatorLocationButton_locateIcon__0COX1"}},212:function(e){e.exports={cloud:"Cloud_cloud__RiZBr",cloudName:"Cloud_cloudName__29gYJ",cloudDescription:"Cloud_cloudDescription__i_XYv"}},5527:function(e){e.exports={cloudlist:"CloudList_cloudlist__TH2oo"}},6950:function(e){e.exports={sliderContainer:"DistanceSlider_sliderContainer__csrrF",sliderInput:"DistanceSlider_sliderInput__PmkB_",sliderLabel:"DistanceSlider_sliderLabel__7X7P8",sliderDistance:"DistanceSlider_sliderDistance___rvGq"}},214:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",title:"Home_title__T09hD"}},2276:function(e){e.exports={button:"CloudProviders_button__BapT2",selected:"CloudProviders_selected__cqhye",image:"CloudProviders_image__LPxKJ",imageLarge:"CloudProviders_imageLarge__2uLoQ",list:"CloudProviders_list__NaTqk"}},1373:function(e){e.exports={list:"RegionsList_list__qedrQ",button:"RegionsList_button__gd_CD",selected:"RegionsList_selected__JQ_C9"}}},function(e){e.O(0,[609,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);